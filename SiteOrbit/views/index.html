{% extends 'base.html' %}

{% block content %}

<head>
  <link rel="stylesheet" href="static/css/desaparecidos.css">
  <link rel="stylesheet" href="static/css/style.css" />
  <link rel="stylesheet" href="static/css/orbit-modern.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<section class="hero-custom">
  <div class="container hero-content">
    <div class="hero-text">
      <h1 class="mb-3"><strong>A vida gira. <br> ORBIT acompanha.</strong></h1>
      <p class="mb-4">Descubra o poder do ORBIT. A solução nº 1 para tornar a vida familiar mais segura e conectada.</p>
      <div class="hero-buttons">
        <a href="#" class="btn-join">
          <i class="fas fa-download me-2"></i>BAIXAR APP
        </a>
        <a href="#desaparecidos" class="btn-secondary">
          <i class="fas fa-users me-2"></i>VER DESAPARECIDOS
        </a>
      </div>
    </div>
    <div class="hero-visual">
      <div class="floating-card">
        <div class="app-screen">
          <img src="../static/imgs/app-preview.png" alt="Visualização do aplicativo ORBIT">
        </div>
      </div>
    </div>
  </div>
</section>

<section id="desaparecidos" class="desaparecidos-destaque py-5">
  <div class="container">
    <div class="section-header">
      <h2>Pessoas Desaparecidas</h2>
      <p>Ajude-nos a localizar estas pessoas. Qualquer informação é valiosa.</p>
    </div>
    <div id="desaparecidos-container" class="row g-4">
      {% for desaparecido in desaparecidos[:4] %}
      <div class="col-md-6 col-lg-3">
        <div class="flip-card">
          <div class="flip-card-inner">

            <div class="flip-card-front">
              {% if desaparecido.imagem %}
              {% if desaparecido.origem == 'site' %}
              <img src="{{ url_for('static', filename='uploads/' + desaparecido.imagem) }}"
                alt="Foto de {{ desaparecido.nome }}">
              {% else %}
              <img src="http://localhost/apptcc/uploads/{{ desaparecido.imagem }}"
                alt="Foto de {{ desaparecido.nome }}">
              {% endif %}
              {% else %}
              <img src="{{ url_for('static', filename='img/imagem-nao-disponivel.png') }}" alt="Imagem não disponível">
              {% endif %}

              <div class="card-overlay"></div>
              <div class="overlay-info">
                <h5>{{ desaparecido.nome }}</h5>
                <p><i class="fas fa-map-marker-alt me-2"></i>{{ desaparecido.localVisto }}</p>
                <p>
                  <i class="fas fa-clock me-2"></i>
                  {% if desaparecido.vezVisto %}
                  {% if desaparecido.vezVisto is string %}
                  {{ desaparecido.vezVisto }}
                  {% else %}
                  {{ desaparecido.vezVisto}}
                  {% endif %}
                  {% else %}
                  Não informado
                  {% endif %}
                </p>
              </div>
            </div>

            <div class="flip-card-back">
              <div class="back-content">
                <h5>Informações</h5>
                <p><strong><i class="fas fa-phone me-2"></i>Contato:</strong> {{ desaparecido.telefoneContato }}</p>
                <p><strong><i class="fas fa-file-alt me-2"></i>Descrição:</strong> {{ desaparecido.descricao }}</p>
                <p>
                  <strong><i class="fas fa-calendar me-2"></i>Visto por último:</strong>
                  {% if desaparecido.vezVisto %}
                  {% if desaparecido.vezVisto is string %}
                  {{ desaparecido.vezVisto }}
                  {% else %}
                  {{ desaparecido.vezVisto.strftime('%d/%m/%Y às %H:%M') }}
                  {% endif %}
                  {% else %}
                  Não informado
                  {% endif %}
                </p>
                <a href="{{ url_for('detalhe', id=desaparecido.id) }}" class="btn-detalhes">
                  <i class="fas fa-info-circle me-2"></i>Ver detalhes
                </a>
              </div>
            </div>

          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    <div class="text-center mt-5">
      <a href="{{ url_for('desaparecidos') }}" class="btn-ver-mais">
        Ver todas as pessoas desaparecidas <i class="fas fa-arrow-right ms-2"></i>
      </a>
    </div>
  </div>
</section>

<script>
  const desaparecidos = JSON.parse('{{ desaparecidos_json|tojson|safe }}');
  let startIndex = 0;
  const cardsPerPage = 4;
  const container = document.getElementById("desaparecidos-container");

  function renderCards() {
    container.innerHTML = "";
    const slice = [];

    for (let i = 0; i < cardsPerPage; i++) {
      const index = (startIndex + i) % desaparecidos.length;
      slice.push(desaparecidos[index]);
    }

    slice.forEach(d => {
      container.innerHTML += `
        <div class="col-md-6 col-lg-3">
          <div class="flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                ${d.imagem
          ? (d.origem === "site"
            ? `<img src="/static/uploads/${d.imagem}" alt="Foto de ${d.nome}">`
            : `<img src="http://localhost/apptcc/uploads/${d.imagem}" alt="Foto de ${d.nome}">`
          )
          : `<img src="/static/img/imagem-nao-disponivel.png" alt="Imagem não disponível">`
        }
                <div class="card-overlay"></div>
                <div class="overlay-info">
                  <h5>${d.nome}</h5>
                  <p><i class="fas fa-map-marker-alt me-2"></i>${d.localVisto || "Não informado"}</p>
                  <p><i class="fas fa-clock me-2"></i>${d.vezVisto || "Não informado"}</p>
                </div>
              </div>
              <div class="flip-card-back">
                <div class="back-content">
                  <h5>Informações</h5>
                  <p><strong><i class="fas fa-phone me-2"></i>Contato:</strong> ${d.telefoneContato || "Não informado"}</p>
                  <p><strong><i class="fas fa-file-alt me-2"></i>Descrição:</strong> ${d.descricao || "Não informado"}</p>
                  <p><strong><i class="fas fa-calendar me-2"></i>Visto por último:</strong> ${d.vezVisto || "Não informado"}</p>
                  <a href="/detalhe/${d.id}" class="btn-detalhes">
                    <i class="fas fa-info-circle me-2"></i>Ver detalhes
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
    });

    startIndex = (startIndex + cardsPerPage) % desaparecidos.length;
  }

  renderCards();
  setInterval(renderCards, 10000);
</script>

<section class="features-custom">
  <div class="container">
    <div class="section-header">
      <h2>Por que escolher o ORBIT?</h2>
      <p>Recursos inovadores para manter sua família segura e conectada</p>
    </div>
    <div class="row g-4">
      <div class="col-md-4">
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fas fa-users"></i>
          </div>
          <h3>Acompanhe seus familiares</h3>
          <p>Localização em tempo real e histórico de rotas com atualizações instantâneas</p>
        </div>
      </div>

      <div class="col-md-4">
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fas fa-address-book"></i>
          </div>
          <h3>Denúncias de pessoas desaparecidas</h3>
          <p>Informações detalhadas sobre as vítimas perto de você</p>
        </div>
      </div>

      <div class="col-md-4">
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fas fa-shield-alt"></i>
          </div>
          <h3>Segurança em tempo real</h3>
          <p>Alertas automáticos e monitoramento de deslocamentos seguros</p>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="about-project py-5">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6">
        <div class="section-header left-aligned">
          <h2>Sobre o Projeto ORBIT</h2>
          <p class="lead">Mais do que um aplicativo, uma rede de segurança</p>
        </div>
        <p>O ORBIT foi desenvolvido com a missão de proporcionar tranquilidade às famílias e ajudar na localização de pessoas desaparecidas.</p>
        <div class="features-list">
          <div class="feature-item">
            <div class="feature-number">01</div>
            <div class="feature-text">
              <h4>Área dedicada a vítimas de desaparecimento</h4>
              <p>Informações centralizadas para ajudar a localizar pessoas desaparecidas</p>
            </div>
          </div>
          <div class="feature-item">
            <div class="feature-number">02</div>
            <div class="feature-text">
              <h4>Localização em tempo real de familiares</h4>
              <p>Saiba onde seus entes queridos estão a qualquer momento</p>
            </div>
          </div>
          <div class="feature-item">
            <div class="feature-number">03</div>
            <div class="feature-text">
              <h4>Alertas inteligentes de segurança</h4>
              <p>Notificações instantâneas para situações de emergência</p>
            </div>
          </div>
        </div>
        <a href="#" class="btn-about-project">
          Saiba mais sobre o projeto <i class="fas fa-arrow-right ms-2"></i>
        </a>
      </div>
      <div class="col-lg-6">
        <div class="about-visual">
          <div class="main-image">
            <img src="../static/imgs/logo.png" alt="Aplicativo ORBIT em uso">
          </div>
          <div class="floating-element el-1"></div>
          <div class="floating-element el-2"></div>
          <div class="floating-element el-3"></div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="testimonials py-5">
  <div class="container">
    <div class="section-header">
      <h2>O que nossos usuários dizem</h2>
      <p>Histórias reais de pessoas que confiam no ORBIT</p>
    </div>
    <div class="row">
      <div class="col-md-4">
        <div class="testimonial-card">
          <div class="testimonial-content">
            <div class="quote-icon">
              <i class="fas fa-quote-left"></i>
            </div>
            <p class="testimonial-text">"O Orbit me dá paz sabendo que posso localizar meus filhos rapidamente!"</p>
          </div>
          <div class="testimonial-author">
            <div class="author-avatar">
              <i class="fas fa-user-circle"></i>
            </div>
            <div class="author-info">
              <h5>Carlos Silva</h5>
              <p>Pai de dois adolescentes</p>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="testimonial-card">
          <div class="testimonial-content">
            <div class="quote-icon">
              <i class="fas fa-quote-left"></i>
            </div>
            <p class="testimonial-text">"Junto com o Orbit, eu consegui localizar a minha mãe que havia desaparecido!"</p>
          </div>
          <div class="testimonial-author">
            <div class="author-avatar">
              <i class="fas fa-user-circle"></i>
            </div>
            <div class="author-info">
              <h5>Ana Oliveira</h5>
              <p>Mãe e professora</p>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="testimonial-card">
          <div class="testimonial-content">
            <div class="quote-icon">
              <i class="fas fa-quote-left"></i>
            </div>
            <p class="testimonial-text">"Meus netos me ensinaram a usar e agora me sinto muito mais seguro quando saio sozinho."</p>
          </div>
          <div class="testimonial-author">
            <div class="author-avatar">
              <i class="fas fa-user-circle"></i>
            </div>
            <div class="author-info">
              <h5>Roberto Santos</h5>
              <p>Avô</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock content %}