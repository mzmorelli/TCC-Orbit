{% extends 'base.html' %}

{% block content %}
<head>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/desaparecidos.css') }}">
</head>

<section class="detalhe-section py-5">
  <div class="container">
    <button onclick="history.back()" class="btn btn-sm btn-outline-secondary mb-4">← Voltar</button>
    
    <div class="detalhe-card shadow-lg rounded-4 p-4 bg-white">
      <div class="row g-4 align-items-center">
        
        <!-- FOTO -->
        <div class="col-md-5 text-center">
          {% if pessoa.imagem %}
            <img src="{{ 'http://localhost/appTcc/uploads/' + pessoa.imagem }}" 
                 alt="{{ pessoa.nome }}" 
                 class="img-fluid rounded-3 detalhe-img">
          {% else %}
            <div class="img-placeholder detalhe-img"></div>
          {% endif %}
        </div>
        
        <!-- INFORMAÇÕES -->
        <div class="col-md-7">
          <h2 class="mb-3 text-primary fw-bold">{{ pessoa.nome }}, {{ pessoa.idade }} anos</h2>
          <div class="row">
            <div class="col-sm-6">
              <p><strong>Sexo:</strong> {{ pessoa.sexo }}</p>
              <p><strong>Altura:</strong> {{ pessoa.altura }} cm</p>
              <p><strong>Contato:</strong> {{ pessoa.telefoneContato }}</p>
            </div>
            <div class="col-sm-6">
              <p><strong>Último local visto:</strong> {{ pessoa.localVisto }}</p>
              <p><strong>Data e hora:</strong>
                {% if pessoa.vezVisto %}
                  {% if pessoa.vezVisto is string %}
                    {{ pessoa.vezVisto }}
                  {% else %}
                    {{ pessoa.vezVisto.strftime('%d/%m/%Y às %H:%M') }}
                  {% endif %}
                {% else %}
                  Data não informada
                {% endif %}
              </p>
            </div>
          </div>
          <p class="mt-3"><strong>Descrição detalhada:</strong><br>{{ pessoa.descricao }}</p>
          
          <a href="" class="btn btn-detalhes mt-3">
            Entrar em Contato
          </a>
        </div>
      </div>
    </div>

    <!-- COMENTÁRIOS -->
    <div class="comentarios-section mt-5 p-4 rounded-3">
      <h4 class="mb-3">Comentários</h4>
      <form id="comment-form" class="mb-4">
        <div class="mb-3">
          <textarea id="comment" class="form-control" rows="4" placeholder="Compartilhe informações que possam ajudar..."></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Enviar</button>
      </form>
      <div id="comments-list"></div>
    </div>
  </div>
</section>

<script>
  const form = document.getElementById('comment-form');
  const list = document.getElementById('comments-list');
  form.addEventListener('submit', e => {
    e.preventDefault();
    const txt = document.getElementById('comment').value.trim();
    if (!txt) return;
    const div = document.createElement('div');
    div.className = 'comentario-card';
    div.textContent = "@usuario: " + txt;
    list.prepend(div);
    form.reset();
  });
</script>
{% endblock content %}
